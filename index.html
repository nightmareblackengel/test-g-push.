<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <title> OLOLOLO </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="manifest" href="https://nightmareblackengel.github.io/test-g-push./manifest.json">
<script charset="utf-8" src="https://www.gstatic.com/firebasejs/5.8.4/firebase-messaging.js"></script>
<!--     <link rel="stylesheet" href="css/app.css" /> -->
</head>
<body>
    
  <h1>Привет это приложение для тестирования Пуш уведомлений(c file)</h1>


<!-- <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase.js"></script>-->


<script>
    setTimeout(function() {
    
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAnkLi5NMJABOulcxk3lEIVbWAPNuFnPgk",
    authDomain: "esport-test1.firebaseapp.com",
    databaseURL: "https://esport-test1.firebaseio.com",
    projectId: "esport-test1",
    storageBucket: "esport-test1.appspot.com",
    messagingSenderId: "68555226637"
  };
  firebase.initializeApp(config);
    
    //console.log(firebase.app()); 
    
    let msgObj = firebase.messaging();
    //console.log(msgObj);
    
    msgObj.usePublicVapidKey('BGoSTOT4A2HpWyRnAT9D0SNvHSfzGv0mgfFFugLJz6YA9k9ybtP54eceRmTQEVdA41mDLa9stb9eRA38Z6P-t6I');

    //1
    //console.log('get permission');
    msgObj.requestPermission().then(function() {
               console.log('Notification permission granted.');
             // TODO(developer): Retrieve an Instance ID token for use with FCM.
            //2
                // Get Instance ID token. Initially this makes a network call, once retrieved
                // subsequent calls to getToken will return from cache.
                messaging.getToken().then(function(currentToken) {
                  if (currentToken) {
                    sendTokenToServer(currentToken);
                    updateUIForPushEnabled(currentToken);
                  } else {
                    // Show permission request.
                    console.log('No Instance ID token available. Request permission to generate one.');
                    // Show permission UI.
                    updateUIForPushPermissionRequired();
                    setTokenSentToServer(false);
                  }
                }).catch(function(err) {
                  console.log('An error occurred while retrieving token. ', err);
                  showToken('Error retrieving Instance ID token. ', err);
                  setTokenSentToServer(false);
                });
        }).catch(function(err) {
          console.log('ошибка при получении прав.', err);
        });
    }, 500);
</script>
    
    <!--  -->
</body>
</html>
